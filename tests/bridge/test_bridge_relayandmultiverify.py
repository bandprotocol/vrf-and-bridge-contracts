import pytest
from brownie import accounts, MockReceiver
import time

VALID_MULTI_PROOF = "0000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000212000000000000000000000000000000000000000000000000000000000000020C0DB232C868E86A22D648714244B3219B9ABC719DB97BA388198B395BB8BC3ABDF6233CC684B6F6562575C7031E30E8763F54DFF765637FD2AA1FD3CBC33CB46366CB1B4FAF20634640C9BDFEA150AA093601F413FF12A9817394655263CB3B9B9C10B08409DA04E14AB72554A5D037162B4FF17D5FE50F33B29A97DE99C449E50004639775A39A43DD3BF6E390306D9F82CC6DB47D1C3AB67B397E9C03078030C0ABD414B7B9290D0075CD683B8DBED0C6B7E5D1162338FB8828B00E32E3C5F02327BB8E7C548CDA20A3F9330131E658F4BCB5BE238F5EE94D79FD5019E3F75590000000000000000000000000000000000000000000000000000000000C86F5B0000000000000000000000000000000000000000000000000000000063BE7CEA000000000000000000000000000000000000000000000000000000002FBAB33354D95610CF71F0550F84010592131B6E8E501ABB993AE0C752E2BEBCA915485AE3EADE00E000608F04707D2476D61E215C095590DCFB6A9F3896356429E9E57657FB12B5135DEC1D4DAB49174C12B6C30486CCB0C6168ACA49A51089586CE432A0060995F9E22E2E3806A5C45FF2161838CB901D860B112CF0976D9817224AFA000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000002E000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000F0802115B6FC8000000000022480A20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000261224080112208C52F86A7CEF2FD3EF955BCB450BB93E08CE023ECCC3E0E20FFB0BE42056E384000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000220000000000000000000000000000000000000000000000000000000000000440000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000005C000000000000000000000000000000000000000000000000000000000000006800000000000000000000000000000000000000000000000000000000000000740000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000008C000000000000000000000000000000000000000000000000000000000000009800000000000000000000000000000000000000000000000000000000000000A400000000000000000000000000000000000000000000000000000000000000B000000000000000000000000000000000000000000000000000000000000000BC00000000000000000000000000000000000000000000000000000000000000C800000000000000000000000000000000000000000000000000000000000000D400000000000000000000000000000000000000000000000000000000000000E000000000000000000000000000000000000000000000000000000000000000EC00000000000000000000000000000000000000000000000000000000000000F800000000000000000000000000000000000000000000000000000000000001040000000000000000000000000000000000000000000000000000000000000110000000000000000000000000000000000000000000000000000000000000011C000000000000000000000000000000000000000000000000000000000000012800000000000000000000000000000000000000000000000000000000000001340000000000000000000000000000000000000000000000000000000000000140000000000000000000000000000000000000000000000000000000000000014C000000000000000000000000000000000000000000000000000000000000015800000000000000000000000000000000000000000000000000000000000001640000000000000000000000000000000000000000000000000000000000000170000000000000000000000000000000000000000000000000000000000000017C0000000000000000000000000000000000000000000000000000000000000188000000000000000000000000000000000000000000000000000000000000019400000000000000000000000000000000000000000000000000000000000001A000000000000000000000000000000000000000000000000000000000000001AC00000000000000000000000000000000000000000000000000000000000001B800000000000000000000000000000000000000000000000000000000000001C400000000000000000000000000000000000000000000000000000000000001D0062AC9389E7F125AC77189540E3C36CBAEAA504543F2F551F9DC6B7E2D58B0654784ED8320E3EDEC41C537917F78693666741D64A6577E7524BFD3D5FE59C0322000000000000000000000000000000000000000000000000000000000000001B0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D0610F390CDA502000000000000000000000000000000000000000087B9F811E0701AAFEBA95B993645C28628B8F9FE0B23CCA01A31DB2F96A9216F0EC2470A125884BFEB68E8750797360C94DC6A73A22865BA4755D4D6CC31C9F4000000000000000000000000000000000000000000000000000000000000001C0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D0610A0B5E79D02000000000000000000000000000000000000000000B4D4D955A10A9A271B5A3BD6E1F0AD2BF8B761C06538338F6A109618B7BDC834CFEDF14CFDEFF1D610AC5A360608B77B01F8EE8C8F19771A45C1F0D9AE04E7000000000000000000000000000000000000000000000000000000000000001C0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D06109EBEF48D020000000000000000000000000000000000000000FC68640DDD9236E762B6012CC9E07D9F8D4396E0D1B33F94F162FEAB67DCE660264ED0ED161CC9A778490AFDA48E1935AA53B28B550DC6F1F374A2FCC8323783000000000000000000000000000000000000000000000000000000000000001B0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D061081E5EE88020000000000000000000000000000000000000000DC18FD1AC959DC1810D965A80E375A45512C3796FDCD64030A75C7228C3532D60EAAB77ADCAED646FE36894348943BA9F6A65229F934111B298D073B72A0D183000000000000000000000000000000000000000000000000000000000000001B0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D0610B890FBFF0100000000000000000000000000000000000000005E080C66BC2D7DA6CE892BE01D2E5B55D18BBEA3B34BC845228EAB4393351AB162D1E34AEDD4F80A61F011EF83F3A713B89AB5D5932550C9589F5C92E359D043000000000000000000000000000000000000000000000000000000000000001C0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D0610EA96F0C801000000000000000000000000000000000000000072A96956F7FAA479C9E283E5166A8C8CCD52106BEA224C1D4B95131CBEB8452D73BF49068256066E0E92704ACD2ACB80601AF34DDDE924204012BB91C54CB2B3000000000000000000000000000000000000000000000000000000000000001C0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D0610B09AA6FB0100000000000000000000000000000000000000002E9F716178E712D93B8DABE27E71854D6833AAFABDD24D0DE512F27DEE79F2A07AE5B0649A00C0794E7DF09040F3425B9FCEB29408B4DA4E7CB8463DB430F7FC000000000000000000000000000000000000000000000000000000000000001C0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D0610C2BAFE87020000000000000000000000000000000000000000DA1543ECE5EEE8D934EDF01B08E0DC1ACEAB5D9CAEB1DAEF91B72728FBE014981185FFBA5616A18B187B787CB7912AD6B5BBBF91AE902B64D10EB52688F85018000000000000000000000000000000000000000000000000000000000000001B0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D0610F4EFA9910200000000000000000000000000000000000000003BEC14CF4DB4EC4BF80D97343E7CDE04BCC67A3C94B3E876FC56C5CA9211CCD1275E7E513CE5F3F0A646E9F67AED5E91D92990559A16DBD84F82C6761899EF83000000000000000000000000000000000000000000000000000000000000001C0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D0610F9AAC79A02000000000000000000000000000000000000000042817E1ADAEAABD549F53C1A084BAF5F1CE49D3C4B34CDC3CB811F0E974808C756AF1169892C735B6B4100F6FDB45F2B69DA0CA084BF212F2C0F0B22E033D1D8000000000000000000000000000000000000000000000000000000000000001B0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D06108399FA910200000000000000000000000000000000000000001415E960CB8D49E1E4EE01D11D8F5867D4DB3F7ACA1FA000FF3802DF79C4184C11B329C51F5ECAE57F14EEFD9D8A27A44729EF19F9A1794ADFD0ADB572E3EF1C000000000000000000000000000000000000000000000000000000000000001B0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D0610A8CB88F50100000000000000000000000000000000000000005D329C105BBC276EA51623B5D776762443F816EAEA3B24472AD3F770498D64F65BE6B78F00A2C6D8B6731A17D40EDAD14854AA7FDD45BA0E5066C818D4232F3B000000000000000000000000000000000000000000000000000000000000001C0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D06109C8DA0840200000000000000000000000000000000000000009E0379AD685E68EAE9134F909F2CB41AC8A3834F61F95D119AFFE6C35E91B4A80877537BD557794B1166E0315178CC056A40B588AA5B56AE7F8611EAAA8DE3B3000000000000000000000000000000000000000000000000000000000000001C0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D061080C3FF890200000000000000000000000000000000000000004A994300F730A2282F401F4F4DF1C18FF3EB83B9CC902AA6784D3B836D7C37DC4F23F03C42648BB9B10B9E0281E9DA8D9DC5190F97C34FF9221CA071587FF7ED000000000000000000000000000000000000000000000000000000000000001B0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D061085E5C28002000000000000000000000000000000000000000072EF0CAAFA2FF2C753837F1AB341DDEA8876CE81AAF59C08B6F09D94C8C1BB595766E7B9692ED78FFCBCEECF76D0DD768E2A87F7E15B1331DE197D7587A5CD5B000000000000000000000000000000000000000000000000000000000000001C0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D0610FEA8CFD7010000000000000000000000000000000000000000E619B00AABB44976B2BF837224F42BDEB9CB9C8A16EF5CCE5B1F3BDBDA48ED7F547C0BB05580174126D9BF0718D8D6702BF3C55ABC01EA823AF10E6B82D8C936000000000000000000000000000000000000000000000000000000000000001B0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D0610F7F9C1E1010000000000000000000000000000000000000000068D123276ACB458458E89FD60FD2B281AF84B144B67CCB17CFA61A4E437721A48BF59A2CD291714D476DFA780406E761326BD5F6E1F6FE52402CC7B59909378000000000000000000000000000000000000000000000000000000000000001C0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D0610E4F989D701000000000000000000000000000000000000000070EB96DB03CF8CBB32EB253086732B92AC9FC840585859E25F2A564818132AFC174F166952ED3E36B2EAABF86470AF120E0592BC93FF768B31DC0EA8EAD9D0B8000000000000000000000000000000000000000000000000000000000000001B0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D0610E4CF8C9B0200000000000000000000000000000000000000006614CC58EC4C52C8CD78536A92800355A235DFD7C35BCAFCCF4315956BDB9FBC512CA5793EB3DEA088B205886F3278377B10EB4FF07423EA3952E0A74DCD0A28000000000000000000000000000000000000000000000000000000000000001C0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D06108DB9BE8302000000000000000000000000000000000000000021117CAC0D79BB048D3A237A68EEE7D63C69392DA4CE7DC424F13B88E445EA55244928818C243F503E8556E1CD3ED748743AC2EEAAE5EA8118D484A030E02707000000000000000000000000000000000000000000000000000000000000001B0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D0610B2E7FBF90100000000000000000000000000000000000000005781544C4AB3BBD9621C957CF48EFAB2BC17CDAA4AB9F75166A525BD17C7AE8346E9B21D99D11EC6DEFE2F14B339EB9443D00404D495EA36C4165BB25412CC05000000000000000000000000000000000000000000000000000000000000001C0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D0610839BFD8F0200000000000000000000000000000000000000002339CA3C046FAF5860857981094A19EFAB9A4D2F0BCF8775ED7B28381FB9C848622124DA49804219FF700FB8289DA323B56A771AB51AAD7721FD20275BC5AC18000000000000000000000000000000000000000000000000000000000000001C0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D0610AAC59A9E020000000000000000000000000000000000000000CBEC665D2789BD7EE43A9E183F3102F46FF21EB573F967E4CBF0F4BD8E071CF3669E233FA57667DEF23B2CEC8A2C5ABF5148E26D38A6BFA038DC5D04C12F792A000000000000000000000000000000000000000000000000000000000000001C0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D0610FDD1D6FE0100000000000000000000000000000000000000007A27AC3D5305A55037FC53212BE97A7B2EAF22601E3F400B7278AF0339B0557152F97D372FB5FCCE943170A8A4A7EFD316AF58E7C2E4F4222E544F3412286CAC000000000000000000000000000000000000000000000000000000000000001B0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D0610C5AEF9F9010000000000000000000000000000000000000000839E56AEC49F01AED606CE0155CBFC81D4C37D300B1FCF4217C4E389243FDCE24AE9F7BD1418820140C8D5A4D760A43B6DA1C28DAF3D693BFAA4F7D88C083D4C000000000000000000000000000000000000000000000000000000000000001C0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D0610B8889BDE01000000000000000000000000000000000000000000CC199286CF34E51DAF957AEA2C692D87E7FF47E76D8E5FA71ED0B7FEE119110BE851C8B937DB15AAF5A39681C425CB2109D0BBA6244D1B498D8FE5D63967ED000000000000000000000000000000000000000000000000000000000000001B0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D06108496A6950200000000000000000000000000000000000000008ADB2042D9215F0E65F02F2B3AF8169CB9EBADD50618F8FBF9B2BA0B73E45CA76C534A65D0052E83C5109BCE00ED550E1DD93AF17F7B116AF761F86C584A8991000000000000000000000000000000000000000000000000000000000000001C0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D0610ACDACD940200000000000000000000000000000000000000004A200DC188E029724E3BFA1AA376C025C26E21D7E7306120CE02E442F066114554A618A0DEE7649ED8B738E2244C398475BEB86F3C821CCA1E511CEAECEC160F000000000000000000000000000000000000000000000000000000000000001B0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D0610AF9D99F001000000000000000000000000000000000000000074D79EE0287EAECF117482CF1251642B3ACB33A984F79E33E3E6B861FC32E488769129EE87734F3ACCD10AE846B8938E0A36BD418EAD203DA435CDB9E3F40E9A000000000000000000000000000000000000000000000000000000000000001C0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D0610E8FCFA950200000000000000000000000000000000000000009D13A887CB52B28781869E9893C9A10923DA4AE976302709FCDEADB7A9C2CD704C85E9D7A30F526E89A829E1F645361B755CE9C43D7F9B282AE58710D0BCCCE4000000000000000000000000000000000000000000000000000000000000001B0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D0610AE82A7FA010000000000000000000000000000000000000000532EF35E503D298F55C636C878DB883663448925C06264EA4E6812A4B9B69A180EA12CE36BE43AE4228000F1742605275CA279ECD6443A591DD15FD8E361CBF6000000000000000000000000000000000000000000000000000000000000001C0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D06108DA9F18402000000000000000000000000000000000000000024880DA79A85B10437E32117AA3BA7E7D5CCD1DE0129148C754CB239A60AD9376BEF0838F8C27396105F42D5BEBCCA8F9C1C28366BC85931B5254E76EE51469D000000000000000000000000000000000000000000000000000000000000001B0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D0610F6D5C38B020000000000000000000000000000000000000000FC3CAF28BC94FEA37BC59CD07679C170E064E0D47A5F46770C818EDD630837B57BEE8E58B82203E5370165BD549EAFD2A43F718F0FAB06A3CFACDD891C37668E000000000000000000000000000000000000000000000000000000000000001C0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000C08EDF9F99D06108DAFA7FB0100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000011A0000000000000000000000000000000000000000000000000000000000000232000000000000000000000000000000000000000000000000000000000000011200000000000000000000000000000000000000000000000000000000000C86F5B0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000003AC0C00000000000000000000000000000000000000000000000000000000000002A00000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000001A00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000A000000000000000000000000000000000000000000000000000000000001869F0000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000006156F9F5000000000000000000000000000000000000000000000000000000006156F9FE000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000001E000000000000000000000000000000000000000000000000000000000000000066665656465720000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001C0000000200000004424554480000000442544342000000003B9ACA0000000000000000000000000000000000000000000000000000000000000000000000001400000002000002D8B71072E000002837D126E7200000000000000000000000000000000000000000000000000000000000000000000000000000000000000017000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000003AC0EDF7B13BCDE7AFAC836A888590370ECC6307E32D69B4C910BCAD144DF96C263F0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000003AC10903198A54747A826502D327B88DA79B3EA860B28E924026F35C06F42711B9F45000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000003AC1585A1DA3DD51BBA8A5F57F9EABED262564D758A41B2394DE05F55BC93AAEE9FB200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000F000000000000000000000000000000000000000000000000000000000003AC2081E8CAFE38CF0B3DBA96FF586DDB3A497F2E9D18B8CA31E6C0BD7C7FBD73CD8700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000001F000000000000000000000000000000000000000000000000000000000003AC39518284E31CF4893BB479B97FF8D291A609A49D62C13DBF2D0F22B7D4E216149800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000003F000000000000000000000000000000000000000000000000000000000003AC656A58D1B50FF36D9250FAD14A9D3EE87F25D7F38E653C38A2FFB31E583F83EA0100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000007000000000000000000000000000000000000000000000000000000000000007D000000000000000000000000000000000000000000000000000000000003AC7E5F5322F9E8554E8888E79FACA8B88D056AFDAAB3BF645C8C356A7A86921759C80000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000F8000000000000000000000000000000000000000000000000000000000003ACB4A3A2A0145D83813E05FEDE311F758E42557D5A7E802FF4BF9184ED342067B40E0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000900000000000000000000000000000000000000000000000000000000000001E7000000000000000000000000000000000000000000000000000000000003AD2BF97D60554121CAB89B6D99ACC6F44CE8283F880C4F3FD6FCAE849AF56C7877410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000A00000000000000000000000000000000000000000000000000000000000003CD000000000000000000000000000000000000000000000000000000000003AFE3FE8D77956A817AD61D8FCC56004F3E4CFEC4EF38EF7B3E42720A9C8DC0F178580000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000B00000000000000000000000000000000000000000000000000000000000007A6000000000000000000000000000000000000000000000000000000000003B1AE32815AAECE54F2B87E5E2C8546541B240AD68165C0730E8647FB8D667A07098A0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000C0000000000000000000000000000000000000000000000000000000000000F5E000000000000000000000000000000000000000000000000000000000003B54239F6F6A922A614F7482D64FFE6B1544A4C4816B5C060E41E963917B314313EDC0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000D0000000000000000000000000000000000000000000000000000000000001EA5000000000000000000000000000000000000000000000000000000000003CA9DEDF30606DA9325F695465DA1DA22506CA02E16E7167DBE6047A4A55F8FA6EE660000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000E0000000000000000000000000000000000000000000000000000000000003D51000000000000000000000000000000000000000000000000000000000003D8E48F40B668C1F7E0B3A914794C09DECC453B22383CFF28B82E7CCCD48C3B48B6BC0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000F0000000000000000000000000000000000000000000000000000000000007A87000000000000000000000000000000000000000000000000000000000004301BDC336EF9926771E38148B19F7183C042EF14555AC4CBE829CC3E7DA414BC9BD100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000F3A40000000000000000000000000000000000000000000000000000000000046A718E3DDBAC653C686A3F5CCAC835EDB00E8261F09E2879716997EC945F34EBBD3500000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000001DEA80000000000000000000000000000000000000000000000000000000000C86F5AA57E3F39A7A2F802772240B09BE03D45EE9EB6E9FEA01D7A9A8B6ACF5B0B010D00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000013000000000000000000000000000000000000000000000000000000000003C35C0000000000000000000000000000000000000000000000000000000000C86F5A69F11632EB6A69FE4464BE0692EA58DD395E152E27771A147F1E0BF9C8A052B90000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000B73570000000000000000000000000000000000000000000000000000000000C86F5A68BB88513939437186DF32375D856983D9DCBCC6E7C34F5960116F482CF80BE20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001500000000000000000000000000000000000000000000000000000000001AAE950000000000000000000000000000000000000000000000000000000000C86F5AEE0E0A49711A184FAC65CC6E673732B0EDE8F834E0D39678069C5A135ABA1E250000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001600000000000000000000000000000000000000000000000000000000003A1CC20000000000000000000000000000000000000000000000000000000000C86F5A5BF3577517832F81A8B53E158B3C236BD3475E6E92D02B15304B51DCE8FDEB43000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000170000000000000000000000000000000000000000000000000000000000790E0B0000000000000000000000000000000000000000000000000000000000C86F5A5A7958582D326ECBD76C49A10E10D60087301B28E108786F4D0F2A7C8034DF63000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000E8ADB90000000000000000000000000000000000000000000000000000000000C86F5AF8ADBBA93AC53E8A6796F1BEC4A9C4A496B7A44F88A8DFCC3A941E224F70E28300000000000000000000000000000000000000000000000000000000000011600000000000000000000000000000000000000000000000000000000000C86F5B0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000003AC0C00000000000000000000000000000000000000000000000000000000000002E00000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000001A00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000A000000000000000000000000000000000000000000000000000000000001869E000000000000000000000000000000000000000000000000000000000000000F000000000000000000000000000000000000000000000000000000006156F9F5000000000000000000000000000000000000000000000000000000006156F9FE0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000066665656465720000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002F0000000500000003455552000000034A5059000000035448420000000358414700000003584155000000003B9ACA000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002C000000050000000045278D6000000000008950580000000001C53AA30000000532A007A80000019859788F5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000017000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000003AC0EBFD74B7C628DDD94910CF4BCB3DEC0B9EE8CABBD7D10BE935371DB5F3AD0A5C6000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000003AC10903198A54747A826502D327B88DA79B3EA860B28E924026F35C06F42711B9F45000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000003AC1585A1DA3DD51BBA8A5F57F9EABED262564D758A41B2394DE05F55BC93AAEE9FB200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000F000000000000000000000000000000000000000000000000000000000003AC2081E8CAFE38CF0B3DBA96FF586DDB3A497F2E9D18B8CA31E6C0BD7C7FBD73CD8700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000001F000000000000000000000000000000000000000000000000000000000003AC39518284E31CF4893BB479B97FF8D291A609A49D62C13DBF2D0F22B7D4E216149800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000003F000000000000000000000000000000000000000000000000000000000003AC656A58D1B50FF36D9250FAD14A9D3EE87F25D7F38E653C38A2FFB31E583F83EA0100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000007000000000000000000000000000000000000000000000000000000000000007D000000000000000000000000000000000000000000000000000000000003AC7E5F5322F9E8554E8888E79FACA8B88D056AFDAAB3BF645C8C356A7A86921759C80000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000F8000000000000000000000000000000000000000000000000000000000003ACB4A3A2A0145D83813E05FEDE311F758E42557D5A7E802FF4BF9184ED342067B40E0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000900000000000000000000000000000000000000000000000000000000000001E7000000000000000000000000000000000000000000000000000000000003AD2BF97D60554121CAB89B6D99ACC6F44CE8283F880C4F3FD6FCAE849AF56C7877410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000A00000000000000000000000000000000000000000000000000000000000003CD000000000000000000000000000000000000000000000000000000000003AFE3FE8D77956A817AD61D8FCC56004F3E4CFEC4EF38EF7B3E42720A9C8DC0F178580000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000B00000000000000000000000000000000000000000000000000000000000007A6000000000000000000000000000000000000000000000000000000000003B1AE32815AAECE54F2B87E5E2C8546541B240AD68165C0730E8647FB8D667A07098A0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000C0000000000000000000000000000000000000000000000000000000000000F5E000000000000000000000000000000000000000000000000000000000003B54239F6F6A922A614F7482D64FFE6B1544A4C4816B5C060E41E963917B314313EDC0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000D0000000000000000000000000000000000000000000000000000000000001EA5000000000000000000000000000000000000000000000000000000000003CA9DEDF30606DA9325F695465DA1DA22506CA02E16E7167DBE6047A4A55F8FA6EE660000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000E0000000000000000000000000000000000000000000000000000000000003D51000000000000000000000000000000000000000000000000000000000003D8E48F40B668C1F7E0B3A914794C09DECC453B22383CFF28B82E7CCCD48C3B48B6BC0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000F0000000000000000000000000000000000000000000000000000000000007A87000000000000000000000000000000000000000000000000000000000004301BDC336EF9926771E38148B19F7183C042EF14555AC4CBE829CC3E7DA414BC9BD100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000F3A40000000000000000000000000000000000000000000000000000000000046A718E3DDBAC653C686A3F5CCAC835EDB00E8261F09E2879716997EC945F34EBBD3500000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000001DEA80000000000000000000000000000000000000000000000000000000000C86F5AA57E3F39A7A2F802772240B09BE03D45EE9EB6E9FEA01D7A9A8B6ACF5B0B010D00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000013000000000000000000000000000000000000000000000000000000000003C35C0000000000000000000000000000000000000000000000000000000000C86F5A69F11632EB6A69FE4464BE0692EA58DD395E152E27771A147F1E0BF9C8A052B90000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000B73570000000000000000000000000000000000000000000000000000000000C86F5A68BB88513939437186DF32375D856983D9DCBCC6E7C34F5960116F482CF80BE20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001500000000000000000000000000000000000000000000000000000000001AAE950000000000000000000000000000000000000000000000000000000000C86F5AEE0E0A49711A184FAC65CC6E673732B0EDE8F834E0D39678069C5A135ABA1E250000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001600000000000000000000000000000000000000000000000000000000003A1CC20000000000000000000000000000000000000000000000000000000000C86F5A5BF3577517832F81A8B53E158B3C236BD3475E6E92D02B15304B51DCE8FDEB43000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000170000000000000000000000000000000000000000000000000000000000790E0B0000000000000000000000000000000000000000000000000000000000C86F5A5A7958582D326ECBD76C49A10E10D60087301B28E108786F4D0F2A7C8034DF63000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000E8ADB90000000000000000000000000000000000000000000000000000000000C86F5AF8ADBBA93AC53E8A6796F1BEC4A9C4A496B7A44F88A8DFCC3A941E224F70E28300000000000000000000000000000000000000000000000000000000000012A00000000000000000000000000000000000000000000000000000000000C86F5B0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000003AC0B00000000000000000000000000000000000000000000000000000000000004200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000001300000000000000000000000000000000000000000000000000000000000001A00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000A000000000000000000000000000000000000000000000000000000000001869D000000000000000000000000000000000000000000000000000000000000000D000000000000000000000000000000000000000000000000000000006156F9F5000000000000000000000000000000000000000000000000000000006156F9FB000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000002A00000000000000000000000000000000000000000000000000000000000000006666565646572000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000C700000019000000044141504C0000000441424E4200000003414D4300000003414D4400000004414D5A4E0000000441524B4B000000044241424100000004434F494E00000002464200000004474C585900000003474D4500000005474F4F474C00000002475300000004484F4F4400000003494155000000044D534654000000044E464C580000000351515100000003534C56000000035350590000000253510000000454534C4100000004545754520000000355534F0000000456495859000000003B9ACA000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000CC00000019000000210B17580000000027824FEA800000000919597A0000000018013D2700000002FD8CAB068000000019D94EC300000000224BC3A10000000037107F9D000000004F37C3DF8000000003C5C935FF0000002941F16C000000026F998119000000005826518A0000000009DB5CD5C000000007C764247F00000041C48625800000008DC4AC12800000005383970C8000000004D0072B80000000644556190000000038280B5580000000B565FA8F000000000E1F058E800000000C2A57BA800000000532F8C28000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000017000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000003AC0CC3CB8F6856AE9B9FCDB01EEB8EACC0707C4A5C94A0289A125A48A65ABCDA2BD6000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000003AC0EDC4B6712E2277CD284B11C7A32EF423B425C9FAB9A4F51F8610BA8D068C01BA1000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000003AC0ED63487779B4E225608D871157BD218715CD2F3520FA52BD8E615FDB3DC942C9B000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000003AC133AA2EDF061BDE02E39B3797F3F460E888FE6AE74C9458B5DA0B0F994AFCD99F5000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000003AC1779F69CE9D2E47419CDCC53566CF347A16E9DF0FD354E924A3F3F04631DEB9C6A00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000003E000000000000000000000000000000000000000000000000000000000003AC29D6FBCCE29C8A681D2EDD629AD5418BF32E10A4B1F237DF228393610E10A03D1800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007000000000000000000000000000000000000000000000000000000000000007D000000000000000000000000000000000000000000000000000000000003AC7E2B69E0019AB26B390ACD0072BD404B59F90C685B0B2D2B9AA76C1300A526FCDA0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000F8000000000000000000000000000000000000000000000000000000000003ACB4A3A2A0145D83813E05FEDE311F758E42557D5A7E802FF4BF9184ED342067B40E0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000900000000000000000000000000000000000000000000000000000000000001E7000000000000000000000000000000000000000000000000000000000003AD2BF97D60554121CAB89B6D99ACC6F44CE8283F880C4F3FD6FCAE849AF56C7877410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000A00000000000000000000000000000000000000000000000000000000000003CD000000000000000000000000000000000000000000000000000000000003AFE3FE8D77956A817AD61D8FCC56004F3E4CFEC4EF38EF7B3E42720A9C8DC0F178580000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000B00000000000000000000000000000000000000000000000000000000000007A6000000000000000000000000000000000000000000000000000000000003B1AE32815AAECE54F2B87E5E2C8546541B240AD68165C0730E8647FB8D667A07098A0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000C0000000000000000000000000000000000000000000000000000000000000F5E000000000000000000000000000000000000000000000000000000000003B54239F6F6A922A614F7482D64FFE6B1544A4C4816B5C060E41E963917B314313EDC0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000D0000000000000000000000000000000000000000000000000000000000001EA5000000000000000000000000000000000000000000000000000000000003CA9DEDF30606DA9325F695465DA1DA22506CA02E16E7167DBE6047A4A55F8FA6EE660000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000E0000000000000000000000000000000000000000000000000000000000003D51000000000000000000000000000000000000000000000000000000000003D8E48F40B668C1F7E0B3A914794C09DECC453B22383CFF28B82E7CCCD48C3B48B6BC0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000F0000000000000000000000000000000000000000000000000000000000007A87000000000000000000000000000000000000000000000000000000000004301BDC336EF9926771E38148B19F7183C042EF14555AC4CBE829CC3E7DA414BC9BD100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000F3A40000000000000000000000000000000000000000000000000000000000046A718E3DDBAC653C686A3F5CCAC835EDB00E8261F09E2879716997EC945F34EBBD3500000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000001DEA80000000000000000000000000000000000000000000000000000000000C86F5AA57E3F39A7A2F802772240B09BE03D45EE9EB6E9FEA01D7A9A8B6ACF5B0B010D00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000013000000000000000000000000000000000000000000000000000000000003C35C0000000000000000000000000000000000000000000000000000000000C86F5A69F11632EB6A69FE4464BE0692EA58DD395E152E27771A147F1E0BF9C8A052B90000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000B73570000000000000000000000000000000000000000000000000000000000C86F5A68BB88513939437186DF32375D856983D9DCBCC6E7C34F5960116F482CF80BE20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001500000000000000000000000000000000000000000000000000000000001AAE950000000000000000000000000000000000000000000000000000000000C86F5AEE0E0A49711A184FAC65CC6E673732B0EDE8F834E0D39678069C5A135ABA1E250000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001600000000000000000000000000000000000000000000000000000000003A1CC20000000000000000000000000000000000000000000000000000000000C86F5A5BF3577517832F81A8B53E158B3C236BD3475E6E92D02B15304B51DCE8FDEB43000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000170000000000000000000000000000000000000000000000000000000000790E0B0000000000000000000000000000000000000000000000000000000000C86F5A5A7958582D326ECBD76C49A10E10D60087301B28E108786F4D0F2A7C8034DF63000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000E8ADB90000000000000000000000000000000000000000000000000000000000C86F5AF8ADBBA93AC53E8A6796F1BEC4A9C4A496B7A44F88A8DFCC3A941E224F70E283"


EXPECTED_MULTI_RELAY_RESULT = [
    [
        "feeder",
        18,
        "0x0000000200000004424554480000000442544342000000003b9aca00",
        16,
        10,
        99999,
        16,
        1633090037,
        1633090046,
        1,
        "0x00000002000002d8b71072e000002837d126e720",
    ],
    [
        "feeder",
        4,
        "0x0000000500000003455552000000034a5059000000035448420000000358414700000003584155000000003b9aca00",
        16,
        10,
        99998,
        15,
        1633090037,
        1633090046,
        1,
        "0x000000050000000045278d6000000000008950580000000001c53aa30000000532a007a80000019859788f50",
    ],
    [
        "feeder",
        19,
        "0x00000019000000044141504c0000000441424e4200000003414d4300000003414d4400000004414d5a4e0000000441524b4b000000044241424100000004434f494e00000002464200000004474c585900000003474d4500000005474f4f474c00000002475300000004484f4f4400000003494155000000044d534654000000044e464c580000000351515100000003534c56000000035350590000000253510000000454534c4100000004545754520000000355534f0000000456495859000000003b9aca00",
        16,
        10,
        99997,
        13,
        1633090037,
        1633090043,
        1,
        "0x00000019000000210b17580000000027824fea800000000919597a0000000018013d2700000002fd8cab068000000019d94ec300000000224bc3a10000000037107f9d000000004f37c3df8000000003c5c935ff0000002941f16c000000026f998119000000005826518a0000000009db5cd5c000000007c764247f00000041c48625800000008dc4ac12800000005383970c8000000004d0072b80000000644556190000000038280b5580000000b565fa8f000000000e1f058e800000000c2a57ba800000000532f8c280",
    ],
]

# Deploy MockReceiver contract
@pytest.fixture(scope="module")
def mockreceiver(bridge):
    return accounts[0].deploy(MockReceiver, bridge)


def test_bridge_relayandmultiverify_success(bridge, mockreceiver):
    mockreceiver.relayAndMultiSafe(VALID_MULTI_PROOF)
    assert bridge.blockDetails(13135707) == (
        "0xdb232c868e86a22d648714244b3219b9abc719db97ba388198b395bb8bc3abdf",
        1673428202,
        800764723,
    )
    for i in range(len(EXPECTED_MULTI_RELAY_RESULT)):
        res = mockreceiver.latestResults(i)
        assert [
            res["clientID"],
            res["oracleScriptID"],
            res["params"],
            res["askCount"],
            res["minCount"],
            res["requestID"],
            res["ansCount"],
            int(res["requestTime"]),
            int(res["resolveTime"]),
            res["resolveStatus"],
            res["result"],
        ] == EXPECTED_MULTI_RELAY_RESULT[i]
